import{c as u,j as e,X as $,u as E}from"./Toast.Caj2rnBI.js";import{u as F,P as v,a as _,d as A,b as h}from"./ui.0ZFFQBcw.js";import{r as a}from"./index.Ba4_ASc-.js";/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],I=u("file-plus",O);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],V=u("pen",Q);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H=u("search",G);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],U=u("trash-2",K);function C({isOpen:s,onClose:l,title:o,children:p,footer:n}){const b=a.useRef(null);return a.useEffect(()=>{const d=c=>{c.key==="Escape"&&l()};return s&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[s,l]),s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{ref:b,className:"bg-white dark:bg-zinc-900 rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 border border-zinc-200 dark:border-zinc-800",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("h3",{className:"font-semibold text-lg text-slate-900 dark:text-white",children:o}),e.jsx("button",{onClick:l,className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 text-slate-600 dark:text-slate-300",children:p}),n&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50",children:n})]})}):null}function J({lang:s}){const l=F(()=>h.projects.toArray()),[o,p]=a.useState(""),{addToast:n}=E(),[b,d]=a.useState(!1),[c,y]=a.useState(null),[M,i]=a.useState(!1),[f,w]=a.useState(null),[m,k]=a.useState(""),r=t=>_[s]?.[t]||_[A]?.[t]||t,g=async t=>{const x=t.target.files?.[0];if(!x)return;if(x.type!=="image/svg+xml"){n(r("alert.upload_svg"),"error");return}const z=new FileReader;z.onload=async P=>{const R=P.target?.result;try{const j=await h.projects.add({name:x.name.replace(".svg",""),svgContent:R,createdAt:new Date,updatedAt:new Date});window.location.href=`/${s}/editor?id=${j}`}catch(j){console.error("Failed to save project:",j),n(r("alert.save_error"),"error")}},z.readAsText(x)},D=t=>{y(t),d(!0)},L=async()=>{c&&(await h.projects.delete(c),n(r("success.project_deleted"),"success"),d(!1),y(null))},S=t=>{w(t),k(t.name),i(!0)},N=async()=>{f&&m&&m!==f.name&&(await h.projects.update(f.id,{name:m,updatedAt:new Date}),n(r("success.project_renamed"),"success")),i(!1),w(null)},T=l?.filter(t=>t.name.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50 dark:bg-zinc-950",children:[e.jsxs("header",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800 px-8 h-16 flex items-center justify-between shrink-0 sticky top-0 z-10 pr-32",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Gallery"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:r("gallery.search_placeholder"),value:o,onChange:t=>p(t.target.value),className:"pl-10 pr-4 py-2 bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-600 dark:focus:ring-blue-500 w-64 shadow-sm text-slate-900 dark:text-white placeholder:text-slate-400"})]}),e.jsxs("label",{className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md shadow-sm transition-all font-medium text-sm cursor-pointer",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:r("gallery.create_new")}),e.jsx("input",{type:"file",accept:".svg",className:"hidden",onChange:g})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:l?l.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 mb-4",children:e.jsx(I,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:r("gallery.no_projects")}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:r("gallery.upload_prompt")}),e.jsxs("label",{className:"inline-flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-md transition-all font-medium cursor-pointer",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:r("gallery.create_new")}),e.jsx("input",{type:"file",accept:".svg",className:"hidden",onChange:g})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[T?.map(t=>e.jsxs("div",{className:"group relative bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden flex flex-col",children:[e.jsx("a",{href:`/${s}/editor?id=${t.id}`,className:"aspect-video bg-zinc-50 dark:bg-black/40 flex items-center justify-center p-8 border-b border-zinc-200 dark:border-zinc-800 group-hover:bg-zinc-100 dark:group-hover:bg-black/60 transition-colors cursor-pointer relative overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center [&>svg]:w-full [&>svg]:h-full [&>svg]:object-contain",dangerouslySetInnerHTML:{__html:t.svgContent}})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("a",{href:`/${s}/editor?id=${t.id}`,className:"flex-1 min-w-0 cursor-pointer",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1 font-mono",children:[r("gallery.edited")," ",new Intl.DateTimeFormat(s,{dateStyle:"medium"}).format(new Date(t.updatedAt))]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>S(t),className:"p-1.5 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:r("gallery.rename"),children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(t.id),className:"p-1.5 text-slate-400 hover:text-red-600 dark:hover:text-red-400 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:r("gallery.delete"),children:e.jsx(U,{className:"w-4 h-4"})})]})]})})]},t.id)),e.jsxs("label",{className:"group flex flex-col items-center justify-center p-8 border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-all cursor-pointer min-h-[280px]",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-blue-500",children:e.jsx(v,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:r("gallery.create_new")}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 text-center max-w-[150px]",children:r("gallery.upload_prompt")}),e.jsx("input",{type:"file",accept:".svg",className:"hidden",onChange:g})]})]}):e.jsx("div",{className:"text-center py-20 text-slate-500",children:"Loading projects..."})})}),e.jsx(C,{isOpen:b,onClose:()=>d(!1),title:r("alert.confirm_delete_title"),footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 text-slate-600 dark:text-slate-300 text-sm font-medium",children:r("alert.cancel")}),e.jsx("button",{onClick:L,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white text-sm font-medium",children:r("gallery.delete")})]}),children:e.jsx("p",{children:r("alert.delete_confirm")})}),e.jsx(C,{isOpen:M,onClose:()=>i(!1),title:r("alert.rename_title"),footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 text-slate-600 dark:text-slate-300 text-sm font-medium",children:r("alert.cancel")}),e.jsx("button",{onClick:N,className:"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium",children:r("alert.confirm")})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:r("alert.rename_prompt")}),e.jsx("input",{type:"text",value:m,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-zinc-200 dark:border-zinc-700 rounded-md bg-white dark:bg-zinc-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&N()}})]})})]})}export{J as default};
